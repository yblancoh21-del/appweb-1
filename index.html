<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Gamer's Hub</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="topbar">
    <div class="logo">
      <a href="index.html" class="logo-link">
        <img src="images/logo.png" alt="Gamer's Hub" class="site-logo">
        <span class="brand-text">GAMER'S HUB</span>
      </a>
    </div>
    <div class="header-actions">
      <button id="menu-btn" class="menu-btn" aria-expanded="false" aria-controls="menu-list">Menu ▾</button>
      <nav id="menu-list" class="menu-list" hidden>
        <a href="index.html" class="active">Inicio</a>
        <a href="dashboard.html">Tienda</a>
        <a href="login_gamer.html">Iniciar sesión</a>
        <a href="registro_gamer.html" class="btn small">Registrarse</a>
        <a id="admin-link" href="admin.html" class="btn small" style="background:rgba(255,123,61,0.2);border:1px solid var(--accent-2);">Admin</a>
      </nav>
      <button id="cart-btn" class="cart-btn" aria-label="Ver carrito">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 6h15l-1.5 9h-12L6 6z" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/><circle cx="10" cy="20" r="1" fill="currentColor"/><circle cx="18" cy="20" r="1" fill="currentColor"/></svg>
        <span id="cart-count" class="cart-count">0</span>
      </button>
    </div>
  </header>

  <main class="container">
    <section class="hero">
      <div class="hero-left">
        <h1>BALDUR'S GATE 3</h1>
        <p class="sub">RPG de mundo abierto con decisiones épicas — Juego del Año 2023</p>
        <div class="hero-cta">
          <a class="btn big" href="dashboard.html">Comprar ahora</a>
          <span class="price">$59.99 USD</span>
        </div>
      </div>
      <div class="hero-right">
        <div class="cover-placeholder">
          <img src="images/baldurs-gate-3.jpg" alt="Cover" class="cover-img">
        </div>
      </div>
    </section>

    <section class="content-grid">
      <aside class="sidebar">
        <h3>SOBRE EL JUEGO</h3>
        <div class="side-card">
          <div class="thumb">IMG</div>
          <div>
            <div class="title">BALDUR'S GATE 3</div>
            <div class="meta">RPG · Fantasía · 2023</div>
          </div>
        </div>

        <h4>DELUX EDITION</h4>
        <div class="small-cards">
          <div class="card">Digital Deluxe<br><span class="muted">$79.99</span></div>
          <div class="card">Ultimate Pass<br><span class="muted">$24.99</span></div>
        </div>
      </aside>

      <section class="main-col">
        <div class="game-header">
          <h2>BALDUR'S GATE 3</h2>
          <div class="rating">★ 4.9 · (125,430)</div>
        </div>

        <p class="lead">Vive una aventura épica en el mundo de Faerun. Crea tu personaje, toma decisiones que moldean la historia, y descubre miles de horas de gameplay. Juega solo o con amigos en multijugador cooperativo.</p>

        <div class="requirements">
          <h3>REQUISITOS MÍNIMOS</h3>
          <ul>
            <li>OS: Windows 10 64-bit</li>
            <li>CPU: Intel i5-6600K / AMD Ryzen 1600</li>
            <li>RAM: 8 GB</li>
            <li>GPU: NVIDIA GTX 1060 / AMD RX 580</li>
            <li>Storage: 150 GB SSD</li>
            <li>DirectX: Version 12</li>
          </ul>
        </div>

        <div class="cards-row">
          <div class="product-card" data-id="elden-ring" data-title="ELDEN RING" data-price="59.99" data-image="images/elden-ring.jpg">
            <div class="art"><img src="images/elden-ring.jpg" alt="ELDEN RING" class="card-art"></div>
            <div class="info">
              <div class="p-title">ELDEN RING</div>
              <div class="p-price">$59.99</div>
            </div>
            <div style="margin-top:8px">
              <button class="btn small add-to-cart" data-id="elden-ring" data-title="ELDEN RING" data-price="59.99" data-image="images/elden-ring.jpg">Agregar al carrito</button>
            </div>
          </div>
          <div class="product-card" data-id="starfield" data-title="STARFIELD" data-price="69.99" data-image="images/starfield.jpg">
            <div class="art"><img src="images/starfield.jpg" alt="STARFIELD" class="card-art"></div>
            <div class="info">
              <div class="p-title">STARFIELD</div>
              <div class="p-price">$69.99</div>
            </div>
            <div style="margin-top:8px">
              <button class="btn small add-to-cart" data-id="starfield" data-title="STARFIELD" data-price="69.99" data-image="images/starfield.jpg">Agregar al carrito</button>
            </div>
          </div>
          <div class="product-card" data-id="cyberpunk" data-title="CYBERPUNK 2077" data-price="39.99" data-image="images/cyberpunk-2077.jpg">
            <div class="art"><img src="images/cyberpunk-2077.jpg" alt="CYBERPUNK 2077" class="card-art"></div>
            <div class="info">
              <div class="p-title">CYBERPUNK 2077</div>
              <div class="p-price">$39.99</div>
            </div>
            <div style="margin-top:8px">
              <button class="btn small add-to-cart" data-id="cyberpunk" data-title="CYBERPUNK 2077" data-price="39.99" data-image="images/cyberpunk-2077.jpg">Agregar al carrito</button>
            </div>
          </div>
        </div>
        
        <!-- Galería eliminada -->
      </section>
    </section>
  </main>

  <footer class="site-footer">
    <div>© 2025 Gamer's Hub · Todos los derechos reservados</div>
  </footer>
  <!-- Cart panel -->
  <aside id="cart-panel" class="cart-panel" aria-hidden="true">
    <div class="cart-head">
      <h3>Tu carrito</h3>
      <button id="cart-close" class="btn small">Cerrar</button>
    </div>
    <div class="cart-items" id="cart-items"></div>
    <div class="cart-total"><div>Total</div><div id="cart-total">$0.00</div></div>
    <button id="cart-clear" class="btn small">Vaciar carrito</button>
    <button id="cart-checkout" class="btn big btn-checkout">Pagar</button>
  </aside>

  <script src="cart.js"></script>
  <script>
    // Hide admin link for non-admin users
    (function(){
      try {
        const adminLink = document.getElementById('admin-link');
        if (!adminLink) return;
        const userRaw = localStorage.getItem('user');
        const user = userRaw ? JSON.parse(userRaw) : null;
        if (!user || !user.is_admin) {
          adminLink.style.display = 'none';
        }
      } catch(e) { console.warn(e); }
    })();
  </script>
  <script>
    // Ordena la galería según el atributo data-order
    (function(){
      try{
        const g = document.getElementById('gallery');
        if(!g) return;
        const items = Array.from(g.children);
        items.sort((a,b)=> (parseInt(a.dataset.order)||0) - (parseInt(b.dataset.order)||0));
        items.forEach(i=>g.appendChild(i));
      }catch(e){console.warn(e)}
    })();

    // Menu toggle for header
    (function(){
      const menuBtn = document.getElementById('menu-btn');
      const menu = document.getElementById('menu-list');
      function closeMenu(){ menu.hidden = true; menuBtn.setAttribute('aria-expanded','false'); }
      menuBtn.addEventListener('click', function(e){ const isOpen = !menu.hidden; menu.hidden = isOpen; menuBtn.setAttribute('aria-expanded', String(!isOpen)); });
      document.addEventListener('click', function(e){ if (!menu.hidden) { const within = e.composedPath ? e.composedPath() : (e.path || []); if (!within.includes(menu) && !within.includes(menuBtn)) closeMenu(); } });
      document.addEventListener('keydown', function(e){ if(e.key === 'Escape') closeMenu(); });
    })();
  </script>
</body>
</html>
